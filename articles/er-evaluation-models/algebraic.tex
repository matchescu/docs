
Initially proposed as a model to discern information quality in entity
resolution over large datasets\cite{tal2007algebraic}, the algebraic model
for entity resolution was later refined to describe entity resolution
itself\cite{Tal11}.
While the Fellegi-Sunter model described in Subsection~\ref{subsec:fsm} is a
probabilistic model that partitions input in two data sources to compare,
this model allows as many information sources as necessary.
Another improvement is the support for transitive matching.

\subsubsection[algdesc]{Description}\label{subsubsec:algdesc}

The core tenet of this model is that entity resolution is an \textit{
equivalence relation}, in the sense defined in set theory.

\begin{defn} If $X$ is a set and $R$ is a rule that takes two elements from
$X$, $x$ and $y$, and tells us whether $x$ is in relationship $y$ in the way
denoted with $R$, then we call $R$ a \textit{binary relation} on
$X$\cite{hoffman1971linear}.
\end{defn}

We can represent $R$ as a function $R:X \times X \rightarrow \{0,1\}$ where
$R(x,y)=1$ if $x$ is in relation $R$ with $y$ and $R(x,y)=0$ otherwise.

\begin{defn}If $R$ is a binary relation on the set $X$, it is convenient to
write $xRy$ when $R(x, y) = 1$.
A binary relation R is called:

\begin{enumerate}
    \item reflexive, if $xRx, \forall x \in X$;
    \item symmetric, if $yRx \implies xRy$, $\forall x,y \in X$;
    \item transitive, if $xRz \land yRz \implies xRz$, $\forall x,y,z \in X$.
\end{enumerate}

An \textit{equivalence relation} on $X$ is a reflexive, symmetric, and
transitive binary relation on $X$\cite{hoffman1971linear}.
\end{defn}

Note that equivalence relations seem to describe almost perfectly the
matching step in entity resolution.
Let's also observe that equivalence relations work on sets for now and move
on.

An equivalence relation over a set $X$ generates an equivalence class.

\begin{defn}Suppose $R$ is an equivalence relation on the set $X$.
If $x$ is an element of $X$, let $\bar{x}$ denote the set
$\{y \in X | xRy\}$.
$\bar{x}$ is called the \textit{equivalence class} of $x$ (for the
equivalence relation $R$)\cite{hoffman1971linear}.
\end{defn}

Since $R$ is an equivalence relation, the equivalence classes for $R$ have the
following properties\cite{hoffman1971linear}:
\begin{enumerate}
    \item $xRx \in \bar{x} \implies \bar{x} \neq \emptyset$,
    \item $y\in\bar{x}\iff~x\in\bar{y}$,$~\forall x,y \in X$ because
    equivalence relations are symmetric,
    \item $\forall x,y \in X$, $\bar{x}$ is either identical with $\bar{y}$
    or they have no elements in common\cite{hoffman1971linear,Tal11}.
\end{enumerate}

The last fundamental notion from set theory that is needed to construct the
algebraic model of entity resolution is the \textit{partition} of a set.

\begin{defn}
    A \textit{partition} of a set $X$ is a collection of non-empty disjoint
    subsets of $X$ whose union is $X$\cite{halmos1960naive,Tal11}.
\end{defn}

Things come together starting with the simple observation that an element
belonging to one of the sets from a partition over $X$ is in a relation with
itself and other elements from the same set.
We say that this relation is \textit{induced} by the partition.
Conversely, from the point of view of the above relation, we say that it
\textit{generated} the partition.

When the partition in question is the set of equivalence classes over $X$,
then the induced relation is an equivalence relation.
Conversely, an equivalence relation $R$ in $X$ will generate a partition
over $X$ comprised by the equivalence classes of $X$\cite{halmos1960naive,
Tal11}.

\begin{defn}
    The equivalence relationship over a set of entity references that exists
    when two references from that set refer to the same real-world entity is
    called \textit{entity resolution}.
\end{defn}

Let's denote this relation with $ER$ and state that if $xERy$ then x and y
are \textit{linked}\cite{Tal11}.
Taking our two earlier mental notes, we can now say that applying $ER$ to
individual elements of a set is akin to the \textit{matching} step in the
entity resolution process.
With each application, we now know that $ER$ creates a partition over the
initial set.
This side-effect of equivalence relationships is the \textit{clustering}
step or aspect of the entity resolution process.
The equivalence classes from the partition generated by $ER$ are also known
as \textit{clusters} in the context of entity resolution.

A last point of notice is that entity resolution tasks do not necessarily
generate a unique outcome\cite{Tal11}.
Depending on the order in which entity references are processed, runing the
same entity resolution task might generate different partitions.
The entity resolution tasks where the order in which entity references are
processed is irrelevant are called \textit{sequence neutral}\cite{Tal11}.
In this paper we are only interested in sequence neutral entity resolution
tasks.

\subsubsection[algrel]{Terminology Mapping}\label{subsubsec:algrel}

In writing this paper, we used a lot of notions that are specific to the
algebraic model.
For example, attributes and entity references preserve their meaning.
In fact, it can be safely assumed that all common terms preserve their
meaning.

The limitations of the algebraic model stem from its need to deal with input
data that is organized as a set.
That means that input data sources that contain duplicate data need to be
cleaned during the extraction step of the entity resolution process before they
are usable in the matching and clustering steps.

The result of an entity resolution task is a partition over the input set of
entity references.
We can then define $P$, the domain of entity profiles as a partition over the
input set of entity references.

\begin{align}
    P &= \{C_i\mid~C_i\subset~Ref,~i\in\mathbb{N}\}\nonumber\\
    Res &= \{C_1,~C_2,~C_3,~\ldots,~C_n\mid~C_i\in~P\}\textrm{, so that}\nonumber\\
    C_i&\neq\emptyset,\forall~1\leq~i\leq~n\textrm{,~and}\nonumber\\
    C_i\cap~C_j&=\emptyset,\forall~1\leq~i\neq~j\leq~n\textrm{,~and}\nonumber\\
    \bigcup_{i=1}^{n}C_i&=Res\nonumber
\end{align}

$Res$, the output domain of the entity resolution is the domain of all
partitions over $Ref$.
Therefore, any item in $Res$ is a collection of profiles, as defined in
Section~\ref{sec:entity-resolution}.
In the algebraic model the profiles that are grouped together in a result also
constitute a partition over $Ref$.
This implies that any entity reference in $Ref$ will be a part of one and only
one entity profile that is part of an entity resolution result.

\subsubsection[algeval]{Specific Metrics}\label{subsubsec:algeval}

Building on top of the notions we already know about ground truth and entity
resolution results, we denote the ground truth with $G$.
The partition that is generated by the entity resolution under scrutiny will be
denoted with $R_{ER}$. 
The quality metrics for entity resolution under the algebraic model have to
do with computing the similarity of partitions~\cite{hitesh2012}.
The ones that we chose to cover seemed to be both the more fundamental and the
more widely used among these metrics.

The first among these is the Rand index introduced by William Rand in
1971\cite{rand1971}.
This index computes the similarity of partitions by comparing pairs of
elements formed from the elements of the clusters of each partition.
Supposing that:
\begin{itemize}
    \item $a$ is the number of pairs that are shared between clusters of $G$
    and $R_{ER}$,
    \item $b$ is the number of pairs that are only in clusters in $G$, but
    not in clusters in $R_{ER}$,
    \item $c$ is the number of pairs that are only in clusters in $R_{ER}$, but
    not in clusters in $G$,
    \item $d$ is the total number of pairs that are not shared.
\end{itemize}
then the Rand index is defined by the quantity
$\frac{a+d}{a+b+c+d}$\cite{adjrand2001}.

The Rand index, $RI : Res^2 \rightarrow \left[0, 1\right]$ is a quality metric
in the sense defined in Section~\ref{sec:entity-resolution}.
The higher the score, the better.
It is usually used to rate the similarity of two partitions.
$1 - Rand Index$ can be an effective measure for the distance between two
partitions.

The expected value of the Rand index of two random partitions does not take
a constant value (say zero)~\cite{adjrand2001}.
That leads to the introduction of the adjusted Rand index which follows the
same principles of comparing partitions in a pairwise manner, but uses a
specific distribution for randomness~\cite{adjrand1985}.
Without going into detail, we can provide a formula for the adjusted Rand
index by using the quantities we defined for the Rand index~\cite{Tal11}.
\[
    Adjusted~Rand~Index = \frac{
        a -\left(\frac{(a+b)\cdot(a+c)}{a+b+c+d}\right)
    }{
        \frac{(2\cdot a+b+c)}{2}-\left(\frac{(a+b)\cdot(a+c)}{a+b+c+d}\right)
    }
\]

Higher values of this index mean more similar partitions.
The adjusted Rand Index, $ARI : Res^2 \rightarrow \left[0, 1\right]$, is a
quality metric in the sense defined in Section~\ref{sec:entity-resolution}.
It is bounded above by 1 and takes on the value 0 when the index equals its
expected value, with values lower than zero having no substantive
value~\cite{adjrand1985}.

The third quality metric we can use for comparing partition similarity is
the Talburt-Wang index (TWI).
The merit of this metric is that it closely follows the Rand index, but is
much simpler to compute~\cite{Tal11}.
\[
    TWI = \frac{\sqrt{|G|\cdot|R_{ER}|}}{|G \cap R_{ER}|},
\]
where if $X$ is a set, then $|X|$ represents the numer of elements in $X$. 

The $TWI: Res^2 \rightarrow \left[0, 1\right]$ is a quality metric as defined in
Section~\ref{sec:entity-resolution}.
It uses the number of clusters that are found in both the ground truth and in
the entity resolution task's output.
It provides a good approximation of how many clusters are returned correctly
by the entity resolution task.
The Talburt-Wang index takes values between 0 and 1, with 1 indicating that
the return value of the entity resolution task perfectly matches the ground
truth.

Other similarity metrics used to compare partitions are the so-called pairwise
and cluster metrics.
Pairwise metrics were first introduced as alternative quality metrics to be used
for evaluating entity resolution results\cite{Men10}.
% \textcolor{green}{eu as include si referintele "radacina": https://www.jstor.org/stable/pdf/1756667.pdf, https://www.cs.utexas.edu/users/ml/papers/marlin-kdd-wkshp-03.pdf}
% \textcolor{orange}{as vrea sa le includ, dar nu sunt sigur ca le pot include aici. referintele nu par sa aiba o legatura directa cu pairwise metrics. poate in alta parte?}

Similarly to the Rand Index, pairwise metrics rely on extracting pairs of items
to determine how similar two partitions over the same set are.
They differ from the Rand index because pairwise metrics operate at the more
granular partition level and not at the partition class level.

Pairwise precision, $PP:Res^2\rightarrow~\left[0,1\right]$ is defined as the
ratio between the number of pairs in the  that are also in $G$ and the number
of pairs in $R_{ER}$.
In other words pairwise precision tells us how many pairs the entity
resolution task got right out of the pairs it returned with a maximum value of
1 indicating an ideal result.
\[
    PP = \frac{|Pairs(R_{ER}) \cap Pairs(G)|}{|Pairs(R_{ER})|}
\]

Pairwise recall, $PR:Res^2\rightarrow~\left[0,1\right]$ is defined as the ratio
between the number of pairs in $R_{ER}$ that are also in $G$ and the number of
pairs in $G$.
In other words, pairwise recall tells us how many pairs the entity
resolution task got right from the ideal answer, with a maximum value of 1
indicating an ideal result.
\[
    PR = \frac{|Pairs(R_{ER}) \cap Pairs(G)|}{|Pairs(G)|}
\]

The harmonic mean between pairwise precision and pairwise recall,
$PR:Res^2\rightarrow~\left[0,1\right]$ is called the pairwise F1 score or the
pairwise comparison measure\cite{Men10}.
\[
    PF1=\frac{2 \cdot PP \cdot PR}{PP + PR}
\]
The maximum value of this measure is 1 and indicates ideal precision and ideal
recall.

Similarly to their pairwise counterparts, we also have cluster metrics: cluster
precision, cluster recall and cluster comparison measure (or $CF_1$).

The cluster precision, $CP:Res^2\rightarrow~\left[0,1\right]$ is the ratio
between the number of identical clusters between the entity resolution output
and the ground truth and the number of clusters in the entity resolution output.
In other words, we want to know how many clusters the entity resolution task
got right in relation to its own output.
The maximum value of 1 indicates perfect coverage of the output in relation to
the ground truth.
\[
    CP=\frac{|Clusters(R_{ER}) \cap Clusters(G)|}{|Clusters(R_{ER})|}
\]

The cluster recall $CR:Res^2\rightarrow~\left[0,1\right]$ is the ratio between
the number of clusters that are common between the entity resolution task's
result and the ground truth over the number of clusters in the ground truth.
In other words, this measures how many clusters did the entity resolution
task get right in relation to the ground truth.
The maximum value of 1 indicates full coverage of the ground truth by the
output.

\[
    CR = \frac{|Clusters(R_{ER}) \cap Clusters(G)|}{|Clusters(G)|}
\]

Finally, the cluster comparison metric $CF_1:Res^2\rightarrow~\left[0,1\right]$
is the harmonic mean between the cluster precision and the cluster recall.

\[
    CF_1 = \frac{2 \cdot CP \cdot CR}{CP + CR}
\]
The maximum value indicates perfect cluster precision and cluster recall, so a
perfect match.

The pairwise and cluster metrics provide more insight into how two entity
resolution results compare structurally, which is an ability that statistical
metrics lack.
The idea of discerning how the structures of two results compare was first
suggested in Rand's paper that described his namesake index\cite{rand1971}.

The pairwise quality metrics (the pairwise precision, recall and
comparison measure as well as the Rand Index and Adjusted Rand Index) mimic
more or less closely the statistical metrics of the F-S model.
The cluster quality metrics exposed by this model provide insights that
either complement or support the pairwise metrics.
